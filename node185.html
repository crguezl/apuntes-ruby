<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Predominancia/Invalidación de Métodos (overriding)</TITLE>
<META NAME="description" CONTENT="Predominancia/Invalidación de Métodos (overriding)">
<META NAME="keywords" CONTENT="perlexamples">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="mystyle.css">

<LINK REL="next" HREF="node186.html">
<LINK REL="previous" HREF="node184.html">
<LINK REL="up" HREF="node182.html">
<LINK REL="next" HREF="node186.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A NAME="tex2html5875"
  HREF="node186.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html5869"
  HREF="node182.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html5863"
  HREF="node184.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html5871"
  HREF="node735.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html5873"
  HREF="node738.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html29"
  HREF="http://nereida.deioc.ull.es/~lpp/index.html"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="logoLPP.png"
 ALT="LPP"></A><A NAME="tex2html30"
  HREF="http://campusvirtual.ull.es/1314/course/view.php?id=1102"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="LPP moodle"></A><A NAME="tex2html31"
  HREF="http://campusvirtual.ull.es/1314/course/view.php?id=1091"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="SYTW moodle"></A><A NAME="tex2html32"
  HREF="perlexamples.pdf"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="pdf"></A><A NAME="tex2html33"
  HREF="https://dl.dropbox.com/u/14539152/LPP/LPPbook/index.html"><IMG
  WIDTH="60" ALIGN="BOTTOM" BORDER="0"
 SRC="lupa.gif"
 ALT="ruby gems"></A><A NAME="tex2html34"
  HREF="http://www.ruby-doc.org/"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="perlonion.jpeg"
 ALT="perldoc"></A><A NAME="tex2html35"
  HREF="http://www.github.com"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="google-code-project-hosting.jpeg"
 ALT="github"></A><A NAME="tex2html36"
  HREF="http://rubylearning.com/blog/"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="perl6.jpg"
 ALT="blogs"></A><A NAME="tex2html37"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html38"
  HREF="http://www.ull.es/view/centros/etsii/Inicio/es"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html39"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html40"
  HREF="https://plus.google.com/u/0/communities/115470806071217401678"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="ull-etsii-grado-lpp-1314"></A><A NAME="tex2html41"
  HREF="https://plus.google.com/u/0/communities/109091480492072495700"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="ull-etsii-grado-stw-1314"></A>
<BR>
<B> Siguiente:</B> <A NAME="tex2html5876"
  HREF="node186.html">Aumentando la Conducta Mediante</A>
<B> Subir:</B> <A NAME="tex2html5870"
  HREF="node182.html">Subclases y Herencia</A>
<B> Anterior:</B> <A NAME="tex2html5864"
  HREF="node184.html">super</A>
 &nbsp; <B>  <A NAME="tex2html5872"
  HREF="node735.html">&#205;ndice General</A></B> 
 &nbsp; <B>  <A NAME="tex2html5874"
  HREF="node738.html">&#205;ndice de Materias</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsecciones</STRONG></A>

<UL CLASS="ChildLinks">
<LI><A NAME="tex2html5877"
  HREF="node185.html#SECTION02733100000000000000">Predominancia de Métodos Privados</A>
</UL>
<!--End of Table of Child-Links-->
<HR>

<H2><A NAME="SECTION02733000000000000000"></A>
<A NAME="subsection:overriding"></A>
<BR>
Predominancia/Invalidación de Métodos (overriding)
</H2>

<P>
Se entiende por <A NAME="tex2html362"
  HREF="http://en.wikipedia.org/wiki/Method_overriding">overriding</A>
la posibilidad de reemplazar la conducta de un método en la superclase.

<P>
<PRE>
[19:28][~/Dropbox/src/ruby/rubytesting/TheRubyProgrammingLanguage/Chapter7ClassesAndModules]$ cat overriding_methods.rb 
class WorldGreeter
  def greet                      # Display a greeting
    puts "#{greeting} #{who}"
  end 

  def greeting                   # What greeting to use 
    "Hello"
  end 

  def who                        # Who to greet
    "World"
  end 
end

# Greet the world in Spanish
class SpanishWorldGreeter &lt; WorldGreeter
  def greeting                   # Override the greeting
    "Hola"
  end 
end

# We call a method defined in WorldGreeter, which calls the overridden
# version of greeting in SpanishWorldGreeter, and prints "Hola World"
SpanishWorldGreeter.new.greet
</PRE>

<P>
Ejecución:
<PRE>
[19:28][~/Dropbox/src/ruby/rubytesting/TheRubyProgrammingLanguage/Chapter7ClassesAndModules]$ ruby overriding_methods.rb 
Hola World
</PRE>

<P>

<UL>
<LI>Nótese que es posible definir una clase <A NAME="7583"></A><SPAN  CLASS="textbf">Abstracta</SPAN> que invoca ciertos <A NAME="7585"></A><SPAN  CLASS="textbf">métodos abstractos</SPAN>
cuya definición se delega a las subclases.
</LI>
<LI>Una clase que extiende una clase <A NAME="7587"></A><SPAN  CLASS="textbf">abstracta</SPAN> es <A NAME="7589"></A><SPAN  CLASS="textbf">concreta</SPAN> si define todos
los métodos abstractos de sus ancestros.
</LI>
</UL>

<P>
<PRE>
[19:34][~/Dropbox/src/ruby/rubytesting/TheRubyProgrammingLanguage/Chapter7ClassesAndModules]$ cat abstract_and_concrete_classes.rb 
# This class is abstract; it doesn't define greeting or who
# No special syntax is required: any class that invokes methods that are
# intended for a subclass to implement is abstract.
class AbstractGreeter
  def greet
    puts "#{greeting} #{who}"
  end
end

# A concrete subclass
class WorldGreeter &lt; AbstractGreeter
  def greeting; "Hello"; end
  def who; "World"; end
end

WorldGreeter.new.greet  # Displays "Hello World"
</PRE>

<P>
Ejecución:
<PRE>
[19:34][~/Dropbox/src/ruby/rubytesting/TheRubyProgrammingLanguage/Chapter7ClassesAndModules]$ ruby abstract_and_concrete_classes.rb 
Hello World
</PRE>

<P>

<H3><A NAME="SECTION02733100000000000000"></A>
<A NAME="subsubsection:predominancia_de_metodos_privados"></A>
<BR>
Predominancia de Métodos Privados
</H3>
Los métodos privados no pueden ser invocados con un receptor explícito pero son heredados por las subclases.
Si ocurre que 

<OL>
<LI>Nuestra clase hereda de otra
</LI>
<LI>Definimos un método (cualquiera que sea su visibilidad)
en nuestra subclase que tiene el mismo nombre que un método privado en la superclase
</LI>
<LI>Entonces sobreescribimos el método privado. 
</LI>
<LI>Si lo hemos hecho por equivocación y el método privado 
así llamado era usado como un helper por la superclase
<SPAN  CLASS="textbf">es muy posible que esta colisión produzca una conducta indeseable</SPAN>.
</LI>
<LI>Cuando herede procure estar familiarizado con la implementación de la superclase.
</LI>
</OL>

<P>
El siguiente ejemplo ilustra el problema:
<PRE>
[~/srcLPP/Chapter7ClassesAndModules/overriding_methods]$ cat overriding_private_methods.rb 
class MotherFoo
  def titi 
   foo
  end

  private
  def foo
   "mother foo"
  end
end

class ChildFoo &lt; MotherFoo
  def foo 
    "child foo"
  end
end

c = ChildFoo.new
puts c.titi # child foo

print "Private methods of mother class: "
class MotherFoo
  puts MotherFoo.private_instance_methods(false)
end
</PRE>

<P>
La llamada a <code>titi</code> hace que se llame al método <code>foo</code> de la clase hija en vez
de al método <code>foo</code> de la clase madre que era lo que el programador pretendía.

<P>
Una manera de paliar este problema consiste en documentar los métodos privados de nuestra clase
en una sección para desarrolladores. 

<P>
Como muestra la ejecución del anterior ejemplo 
siempre es posible averiguar que métodos privados tiene la superclase llamando a 
<code>MotherFoo.private_instance_methods</code>. De esta forma sabemos que nombres 
evitar en nuestra clase hija:

<P>
<PRE>
[~/srcLPP/Chapter7ClassesAndModules/overriding_methods]$ ruby overriding_private_methods.rb 
child foo
Private methods of mother class: foo
[~/srcLPP/Chapter7ClassesAndModules/overriding_methods]$
</PRE>

<P>
Otra forma de aliviar el problema es: 

<OL>
<LI>crear un método anónimo de clase <code>Proc</code> o una lambda
</LI>
<LI>usar una variable de instancia de la clase para guardarlo. 
</LI>
<LI>crear un accessor de lectura para la variable de instancia de la clase como objeto
</LI>
</OL>
Esto hace mas difícil que las clases que hereden
puedan colisionar con nuestro método <I>privado</I>.

<P>
<PRE>
11:10][~/Dropbox/src/ruby/rubytesting/TheRubyProgrammingLanguage/Chapter7ClassesAndModules]$ cat overriding_private_methods3.rb 
class MotherFoo
  @ofoo = Proc.new do |x|
   "mother foo #{x}"
  end

  def self.foo(x)
    @ofoo.call(x)
  end

  def titi(y) 
    MotherFoo.foo(y) 
  end
end

class ChildFoo &lt; MotherFoo
  # puts @ofoo.call # generates an exception: undefined method `call' for nil:NilClass (NoMethodError))
  def foo(z) 
    "child foo #{z}"
  end
  puts MotherFoo.foo(9)
end

c = ChildFoo.new
puts c.titi(4) 
puts c.foo(3)
</PRE>
Como se vé, es todavía posible - pero ahora explicitándolo con <code>MotherFoo.foo</code> - acceder al método "privado"
evitando de este modo la colisión casual.

<P>
Ejecución:
<PRE>
[11:13][~/Dropbox/src/ruby/rubytesting/TheRubyProgrammingLanguage/Chapter7ClassesAndModules]$ ruby overriding_private_methods3.rb 
mother foo 9
mother foo 4
child foo 3
</PRE>

<P>

<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A NAME="tex2html5875"
  HREF="node186.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html5869"
  HREF="node182.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html5863"
  HREF="node184.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html5871"
  HREF="node735.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html5873"
  HREF="node738.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html29"
  HREF="http://nereida.deioc.ull.es/~lpp/index.html"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="logoLPP.png"
 ALT="LPP"></A><A NAME="tex2html30"
  HREF="http://campusvirtual.ull.es/1314/course/view.php?id=1102"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="LPP moodle"></A><A NAME="tex2html31"
  HREF="http://campusvirtual.ull.es/1314/course/view.php?id=1091"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="SYTW moodle"></A><A NAME="tex2html32"
  HREF="perlexamples.pdf"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="pdf"></A><A NAME="tex2html33"
  HREF="https://dl.dropbox.com/u/14539152/LPP/LPPbook/index.html"><IMG
  WIDTH="60" ALIGN="BOTTOM" BORDER="0"
 SRC="lupa.gif"
 ALT="ruby gems"></A><A NAME="tex2html34"
  HREF="http://www.ruby-doc.org/"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="perlonion.jpeg"
 ALT="perldoc"></A><A NAME="tex2html35"
  HREF="http://www.github.com"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="google-code-project-hosting.jpeg"
 ALT="github"></A><A NAME="tex2html36"
  HREF="http://rubylearning.com/blog/"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="perl6.jpg"
 ALT="blogs"></A><A NAME="tex2html37"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html38"
  HREF="http://www.ull.es/view/centros/etsii/Inicio/es"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html39"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html40"
  HREF="https://plus.google.com/u/0/communities/115470806071217401678"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="ull-etsii-grado-lpp-1314"></A><A NAME="tex2html41"
  HREF="https://plus.google.com/u/0/communities/109091480492072495700"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="ull-etsii-grado-stw-1314"></A>
<BR>
<B> Siguiente:</B> <A NAME="tex2html5876"
  HREF="node186.html">Aumentando la Conducta Mediante</A>
<B> Subir:</B> <A NAME="tex2html5870"
  HREF="node182.html">Subclases y Herencia</A>
<B> Anterior:</B> <A NAME="tex2html5864"
  HREF="node184.html">super</A>
 &nbsp; <B>  <A NAME="tex2html5872"
  HREF="node735.html">&#205;ndice General</A></B> 
 &nbsp; <B>  <A NAME="tex2html5874"
  HREF="node738.html">&#205;ndice de Materias</A></B> </DIV>
<!--End of Navigation Panel-->
<ADDRESS>
Casiano Rodriguez León
2014-09-02
</ADDRESS>
</BODY>
</HTML>
