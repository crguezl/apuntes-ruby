<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Acceso a los Atributos</TITLE>
<META NAME="description" CONTENT="Acceso a los Atributos">
<META NAME="keywords" CONTENT="perlexamples">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="mystyle.css">

<LINK REL="next" HREF="node176.html">
<LINK REL="previous" HREF="node174.html">
<LINK REL="up" HREF="node170.html">
<LINK REL="next" HREF="node176.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A NAME="tex2html5995"
  HREF="node176.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html5989"
  HREF="node170.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html5983"
  HREF="node174.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html5991"
  HREF="node792.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html5993"
  HREF="node795.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html29"
  HREF="http://tinyurl.com/lpp1415"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="LPP moodle"></A><A NAME="tex2html30"
  HREF="https://campusvirtual.ull.es/1415/course/view.php?id=5678"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="SYTW moodle"></A><A NAME="tex2html31"
  HREF="perlexamples.pdf"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="pdf"></A><A NAME="tex2html32"
  HREF="https://dl.dropbox.com/u/14539152/LPP/LPPbook/index.html"><IMG
  WIDTH="60" ALIGN="BOTTOM" BORDER="0"
 SRC="lupa.gif"
 ALT="ruby gems"></A><A NAME="tex2html33"
  HREF="http://www.ruby-doc.org/"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="perlonion.jpeg"
 ALT="perldoc"></A><A NAME="tex2html34"
  HREF="http://www.github.com"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="google-code-project-hosting.jpeg"
 ALT="github"></A><A NAME="tex2html35"
  HREF="http://rubylearning.com/blog/"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="perl6.jpg"
 ALT="blogs"></A><A NAME="tex2html36"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html37"
  HREF="http://www.ull.es/view/centros/etsii/Inicio/es"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html38"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html39"
  HREF="https://plus.google.com/u/0/communities/115470806071217401678"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="ull-etsii-grado-lpp-1314"></A><A NAME="tex2html40"
  HREF="https://plus.google.com/u/0/communities/109091480492072495700"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="ull-etsii-grado-stw-1314"></A>
<BR>
<B> Siguiente:</B> <A NAME="tex2html5996"
  HREF="node176.html">Definiendo Operadores (La Clase</A>
<B> Subir:</B> <A NAME="tex2html5990"
  HREF="node170.html">Definición de una Clase</A>
<B> Anterior:</B> <A NAME="tex2html5984"
  HREF="node174.html">Definiendo un método to_s</A>
 &nbsp; <B>  <A NAME="tex2html5992"
  HREF="node792.html">&#205;ndice General</A></B> 
 &nbsp; <B>  <A NAME="tex2html5994"
  HREF="node795.html">&#205;ndice de Materias</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsecciones</STRONG></A>

<UL CLASS="ChildLinks">
<LI><UL>
<LI><A NAME="tex2html5997"
  HREF="node175.html#SECTION02715010000000000000">Utilización de  los Setters Dentro de una Clase</A>
<LI><A NAME="tex2html5998"
  HREF="node175.html#SECTION02715020000000000000">Los Accessors como <TT>attr_accessor</TT> se Invocan Fuera de las Definiciones de Métodos</A>
<LI><A NAME="tex2html5999"
  HREF="node175.html#SECTION02715030000000000000">Todas las clases son módulos</A>
</UL></UL>
<!--End of Table of Child-Links-->
<HR>

<H2><A NAME="SECTION02715000000000000000"></A>
<A NAME="subsection:accesoalosatributos"></A>
<BR>
Acceso a los Atributos
</H2>

<P>
Our Point class uses two instance variables. As we've noted, however,
the value of these variables are only accessible to other instance
methods. If we want users of the Point class to be able to use the
X and Y coordinates of a point, we've got to provide accessor methods
that return the value of the variables:

<P>
<PRE>
class Point
  def initialize(x,y)
    @x, @y = x, y
  end

  def x           # The accessor (or getter) method for @x
    @x
  end

  def y           # The accessor method for @y
    @y
  end
end
</PRE>

<P>
<PRE>
p = Point.new(1,2)
q = Point.new(p.x*2, p.y*3)
</PRE>

<P>
<PRE>
class MutablePoint
  def initialize(x,y); @x, @y = x, y; end

  def x; @x; end       # The getter method for @x
  def y; @y; end       # The getter method for @y

  def x=(value)        # The setter method for @x
    @x = value
  end

  def y=(value)        # The setter method for @y
    @y = value
  end
end
</PRE>

<P>
<PRE>
p = Point.new(1,1)
p.x = 0
p.y = 0
</PRE>

<P>
This combination of instance variable with trivial getter and setter methods is so common that Ruby provides a way to automate it. The <code>attr_reader</code> and <code>attr_accessor</code> methods are defined by the <A NAME="tex2html367"
  HREF="http://ruby-doc.org/core-2.0.0/Module.html"><TT>Module</TT></A> class. All classes are modules, (the <A NAME="tex2html368"
  HREF="http://ruby-doc.org/core-2.0.0/Class.html"><TT>Class</TT></A> class is a subclass of <A NAME="tex2html369"
  HREF="http://ruby-doc.org/core-2.0.0/Module.html"><TT>Module</TT></A>) so you can invoke these method inside any class definition. Both methods take any number of symbols naming attributes. <code>attr_reader</code> creates trivial getter methods for the instance variables with the same name. <code>attr_accessor</code> creates getter and setter methods. Thus, if we were defining a mutable <code>Point</code> class, we could write:

<P>
<PRE>
class Point
  attr_accessor :x, :y # Define accessor methods for our instance variables
end
</PRE>

<P>
<PRE>
class Point
  attr_reader :x, :y  # Define reader methods for our instance variables
end
</PRE>

<P>
<PRE>
attr_reader "x", "y"
</PRE>

<P>
<PRE>
attr :x        # Define a trivial getter method x for @x
attr :y, true  # Define getter and setter methods for @y. Optional boolean is Obsoleted
</PRE>

<P>
<BLOCKQUOTE>
The <code>attr</code>, <code>attr_reader</code>, and <code>attr_accessor</code> methods
create instance methods for us. This is an example of metaprogramming.

</BLOCKQUOTE>

<P>

<H4><A NAME="SECTION02715010000000000000">
Utilización de  los Setters Dentro de una Clase</A>
</H4>
  

<A NAME="parrafo:usodesettersenunmetodo"></A>Una vez que se ha definido un setter como <code>x=</code> podemos sentirnos tentados de utilizarlo
dentro de otro método de instancia de la clase.

<P>
That is, instead of writing <code>@x=2</code>, you might write
<code>x=2</code>, intending to invoke <code>x=(2)</code> implicitly on self.
<OL>
<LI>It doesn’t work; <code>x=2</code> creates a new
local variable.
</LI>
<LI>The rule is that <I><A NAME="8330"></A><SPAN  CLASS="textbf">assignment expressions</SPAN> will only invoke a
<A NAME="8332"></A><SPAN  CLASS="textbf">setter method</SPAN> when invoked through an object</I>
</LI>
<LI>If you want to use a setter from within the class that defines
it, invoke it explicitly through self.
</LI>
<LI>For example: <code>self.x=2</code>.
</LI>
</OL>

<P>
<PRE>
casiano@exthost:~/LPPsrc/221012$ cat -n setters.rb
     1  class Tutu
     2    attr_accessor :n
     3  
     4    def initialize(n)
     5      @n = n
     6    end
     7  
     8    def to_s
     9      "#{n*2}"
    10    end
    11  
    12    def square
    13      n = n * n # n here is a local variable!
    14    end
    15  
    16    def square2
    17      self.n = n * n
    18    end
    19  end
    20  
    21  if __FILE__ == $0
    22    x = Tutu.new(ARGV.shift || 4)
    23    puts x                      # to_s gets called: 8
    24    begin
    25      x.square
    26    rescue
    27        puts "Raised exception '#{$!.class}'. Message: &lt;#{$!}&gt;"
    28    end
    29    x.square2                   # 32 = 16 *2
    30    puts x
    31  end
</PRE>

<P>
<PRE>
~/rubytesting/TheRubyProgrammingLanguage/Chapter7ClassesAndModules$ ruby setters.rb
8
Raised exception 'NoMethodError'. Message: &lt;undefined method `*' for nil:NilClass&gt;
32
</PRE>

<P>

<H4><A NAME="SECTION02715020000000000000">
Los Accessors como <TT>attr_accessor</TT> se Invocan Fuera de las Definiciones de Métodos</A>
</H4>
  

<P>
<code>attr_reader</code> et al. son proveídos por la clase <A NAME="tex2html370"
  HREF="http://ruby-doc.org/core-2.0.0/Module.html"><TT>Module</TT></A>.

<P>

<H4><A NAME="SECTION02715030000000000000">
Todas las clases son módulos</A>
</H4>
  

<P>
<PRE>
ruby-1.9.2-head :004 &gt; Class.class
 =&gt; Class 
ruby-1.9.2-head :005 &gt; Class.superclass
 =&gt; Module 
ruby-1.9.2-head :006 &gt; Class.superclass.superclass
 =&gt; Object 
ruby-1.9.2-head :007 &gt; Class.superclass.superclass.superclass
 =&gt; BasicObject 
ruby-1.9.2-head :008 &gt; Class.ancestors
 =&gt; [Class, Module, Object, InteractiveEditor::Editors, 
     Wirble::Shortcuts, 
     PP::ObjectMixin, 
     Kernel, BasicObject]
</PRE>

<P>
<P>
<DIV><B>Ejercicio  <SPAN CLASS="arabic">14</SPAN>.<SPAN CLASS="arabic">1</SPAN>.<SPAN CLASS="arabic">1</SPAN></B> &nbsp; 
<I>¿<code>attr_accessor</code> es un método de instancia o de clase?</I></DIV><P></P>

<P>

<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A NAME="tex2html5995"
  HREF="node176.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html5989"
  HREF="node170.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html5983"
  HREF="node174.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html5991"
  HREF="node792.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html5993"
  HREF="node795.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html29"
  HREF="http://tinyurl.com/lpp1415"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="LPP moodle"></A><A NAME="tex2html30"
  HREF="https://campusvirtual.ull.es/1415/course/view.php?id=5678"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="SYTW moodle"></A><A NAME="tex2html31"
  HREF="perlexamples.pdf"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="pdf"></A><A NAME="tex2html32"
  HREF="https://dl.dropbox.com/u/14539152/LPP/LPPbook/index.html"><IMG
  WIDTH="60" ALIGN="BOTTOM" BORDER="0"
 SRC="lupa.gif"
 ALT="ruby gems"></A><A NAME="tex2html33"
  HREF="http://www.ruby-doc.org/"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="perlonion.jpeg"
 ALT="perldoc"></A><A NAME="tex2html34"
  HREF="http://www.github.com"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="google-code-project-hosting.jpeg"
 ALT="github"></A><A NAME="tex2html35"
  HREF="http://rubylearning.com/blog/"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="perl6.jpg"
 ALT="blogs"></A><A NAME="tex2html36"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html37"
  HREF="http://www.ull.es/view/centros/etsii/Inicio/es"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html38"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html39"
  HREF="https://plus.google.com/u/0/communities/115470806071217401678"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="ull-etsii-grado-lpp-1314"></A><A NAME="tex2html40"
  HREF="https://plus.google.com/u/0/communities/109091480492072495700"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="ull-etsii-grado-stw-1314"></A>
<BR>
<B> Siguiente:</B> <A NAME="tex2html5996"
  HREF="node176.html">Definiendo Operadores (La Clase</A>
<B> Subir:</B> <A NAME="tex2html5990"
  HREF="node170.html">Definición de una Clase</A>
<B> Anterior:</B> <A NAME="tex2html5984"
  HREF="node174.html">Definiendo un método to_s</A>
 &nbsp; <B>  <A NAME="tex2html5992"
  HREF="node792.html">&#205;ndice General</A></B> 
 &nbsp; <B>  <A NAME="tex2html5994"
  HREF="node795.html">&#205;ndice de Materias</A></B> </DIV>
<!--End of Navigation Panel-->
<ADDRESS>
Casiano Rodriguez León
2014-10-09
</ADDRESS>
</BODY>
</HTML>
