
<H1><A NAME="SECTION026100000000000000000"><tex2html_anchor_invisible_mark></A>
   <A NAME="5742"><tex2html_anchor_invisible_mark></A>
  
<A NAME="practica:lacalculadora2"><tex2html_anchor_mark></A><BR>
Práctica: La Calculadora
</H1>

<P>
Se trata de extender la calculadora en postfijo realizada en la práctica
<A HREF=<tex2html_cr_mark>#practica:postfijo#5129><tex2html_cr_mark></A>.

<P>
La nueva calculadora deberá estar implantada mediante una clase 
<tex2html_verb_mark>472<tex2html_verb_mark> y dispone de dos operadores <tex2html_verb_mark>473<tex2html_verb_mark> y <tex2html_verb_mark>474<tex2html_verb_mark> que permiten respectivamente 
asignar valores a variables
y obtener el valor ligado a una variable.

<P>
Los objetos <tex2html_verb_mark>475<tex2html_verb_mark>  disponen de un atributo <tex2html_verb_mark>476<tex2html_verb_mark> (de sólo lectura),
de un atributo <tex2html_verb_mark>477<tex2html_verb_mark> que contiene la tabla de símbolos.

<P>
El objeto dispone también de un hash privado 
que mantiene las lambdas (véase la seccion <A HREF=<tex2html_cr_mark>#ejercicios:lambda#5130><tex2html_cr_mark></A>)
que implantan las operaciones de  suma, resta, multiplicación, división,
etc.
<PRE><tex2html_verbatim_mark>verbatim619#</PRE>

<P>
El siguiente ejemplo muestra un código que usa la clase:

<P>
<PRE><tex2html_verbatim_mark>verbatim620#</PRE>

<P>
Siguen varias ejecuciones:

<P>
<PRE><tex2html_verbatim_mark>verbatim621#</PRE>
Por defecto la calculadora contiene un conjunto básico de operaciones.
El programa cliente puede añadir nuevas operaciones como ocurre en el ejemplo:
<PRE><tex2html_verbatim_mark>verbatim622#</PRE>
El siguiente ejemplo muestra el uso del operador de asignación <tex2html_verb_mark>478<tex2html_verb_mark>
y del operador de carga (fetch) <tex2html_verb_mark>479<tex2html_verb_mark>:
<PRE><tex2html_verbatim_mark>verbatim623#</PRE>
La expresión <tex2html_verb_mark>480<tex2html_verb_mark> retira el <tex2html_verb_mark>481<tex2html_verb_mark> y la <tex2html_verb_mark>482<tex2html_verb_mark> de la pila y
almacena en la entrada <tex2html_verb_mark>483<tex2html_verb_mark> de la tabla de símbolos de la calculadora
un <tex2html_verb_mark>484<tex2html_verb_mark>. No añade nada al top de la pila.

<P>
La expresión <tex2html_verb_mark>485<tex2html_verb_mark> empuja en el top de la pila el valor asociado 
con la entrada <tex2html_verb_mark>486<tex2html_verb_mark> de la tabla de símbolos.

<P>
La función <tex2html_verb_mark>487<tex2html_verb_mark> imprime el elemento en el top de la pila:
<PRE><tex2html_verbatim_mark>verbatim624#</PRE>

<P>

<UL>
<LI>Consulte el método <tex2html_verb_mark>488<tex2html_verb_mark> de la clase <A NAME="tex2html331"
  HREF="http://www.ruby-doc.org/core-1.9.2/Hash.html">Hash</A>
</LI>
<LI>Generalize el programa para que los operadores <tex2html_verb_mark>489<tex2html_verb_mark> y <tex2html_verb_mark>490<tex2html_verb_mark> puedan ir pegados al identificador:
<PRE><tex2html_verbatim_mark>verbatim625#</PRE>
Hay varias soluciones. Una es usar <tex2html_verb_mark>491<tex2html_verb_mark>:
<PRE><tex2html_verbatim_mark>verbatim626#</PRE>
Otra es usar <tex2html_verb_mark>492<tex2html_verb_mark>. Consulte el método <tex2html_verb_mark>493<tex2html_verb_mark> de la clase <A NAME="5743"><tex2html_anchor_invisible_mark></A><A NAME="tex2html332"
  HREF="http://ruby-doc.org/core-2.0.0/String.html"><TT>String</TT></A>, que permite sustituciones
globales:
<PRE><tex2html_verbatim_mark>verbatim627#</PRE>
</LI>
</UL>

<P>
