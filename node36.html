<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Ejecución de un Programa con el Depurador</TITLE>
<META NAME="description" CONTENT="Ejecución de un Programa con el Depurador">
<META NAME="keywords" CONTENT="perlexamples">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="mystyle.css">

<LINK REL="next" HREF="node37.html">
<LINK REL="previous" HREF="node35.html">
<LINK REL="up" HREF="node26.html">
<LINK REL="next" HREF="node37.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A NAME="tex2html3597"
  HREF="node37.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html3591"
  HREF="node26.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html3585"
  HREF="node35.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html3593"
  HREF="node792.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html3595"
  HREF="node795.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html29"
  HREF="http://tinyurl.com/lpp1415"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="LPP moodle"></A><A NAME="tex2html30"
  HREF="https://campusvirtual.ull.es/1415/course/view.php?id=5678"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="SYTW moodle"></A><A NAME="tex2html31"
  HREF="perlexamples.pdf"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="pdf"></A><A NAME="tex2html32"
  HREF="https://dl.dropbox.com/u/14539152/LPP/LPPbook/index.html"><IMG
  WIDTH="60" ALIGN="BOTTOM" BORDER="0"
 SRC="lupa.gif"
 ALT="ruby gems"></A><A NAME="tex2html33"
  HREF="http://www.ruby-doc.org/"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="perlonion.jpeg"
 ALT="perldoc"></A><A NAME="tex2html34"
  HREF="http://www.github.com"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="google-code-project-hosting.jpeg"
 ALT="github"></A><A NAME="tex2html35"
  HREF="http://rubylearning.com/blog/"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="perl6.jpg"
 ALT="blogs"></A><A NAME="tex2html36"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html37"
  HREF="http://www.ull.es/view/centros/etsii/Inicio/es"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html38"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html39"
  HREF="https://plus.google.com/u/0/communities/115470806071217401678"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="ull-etsii-grado-lpp-1314"></A><A NAME="tex2html40"
  HREF="https://plus.google.com/u/0/communities/109091480492072495700"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="ull-etsii-grado-stw-1314"></A>
<BR>
<B> Siguiente:</B> <A NAME="tex2html3598"
  HREF="node37.html">Averiguando que tiempo hace</A>
<B> Subir:</B> <A NAME="tex2html3592"
  HREF="node26.html">Introduccion</A>
<B> Anterior:</B> <A NAME="tex2html3586"
  HREF="node35.html">Lints in Ruby</A>
 &nbsp; <B>  <A NAME="tex2html3594"
  HREF="node792.html">&#205;ndice General</A></B> 
 &nbsp; <B>  <A NAME="tex2html3596"
  HREF="node795.html">&#205;ndice de Materias</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION02150000000000000000"></A>
<A NAME="section:depurador1"></A>
<BR>
Ejecución de un Programa con el Depurador
</H1>

<P>
También podemos  usar el depurador para ejecutar el
programa paso a paso. El depurador de Ruby se activa
usando <code>-rdebug</code>:

<P>
<PRE>
~/rubytesting$ cat -n polar.rb 
     1	#!/usr/bin/env ruby
     2	
     3	def c2p(x, y) 
     4	  theta = Math.atan2(y, x)
     5	  r     = Math.hypot(x, y)
     6	  [r, theta]
     7	end
     8	x, y = 1, 1
     9	x, y = ARGV.map { |t| t.to_f }  if ARGV.length == 2 
    10	r, theta = c2p(x, y)
    11	
    12	puts "r = #{r} theta = #{theta}\n"
</PRE>

<P>
Para llamar al debugger:
<PRE>
~/rubytesting$ ruby -rdebug polar.rb 1 1
Debug.rb
Emacs support available.

polar.rb:3:def c2p(x, y)
</PRE>

<P>
Para pedir ayuda usamos <code>h</code>:
<PRE>
(rdb:1) help
Debugger help v.-0.002b
Commands
  b[reak] [file:|class:]&lt;line|method&gt;
  b[reak] [class.]&lt;line|method&gt;
                             set breakpoint to some position
  wat[ch] &lt;expression&gt;       set watchpoint to some expression
  cat[ch] (&lt;exception&gt;|off)  set catchpoint to an exception
  b[reak]                    list breakpoints
  cat[ch]                    show catchpoint
  del[ete][ nnn]             delete some or all breakpoints
  disp[lay] &lt;expression&gt;     add expression into display expression list
  undisp[lay][ nnn]          delete one particular or all display expressions
  c[ont]                     run until program ends or hit breakpoint
  s[tep][ nnn]               step (into methods) one line or till line nnn
  n[ext][ nnn]               go over one line or till line nnn
  w[here]                    display frames
  f[rame]                    alias for where
  l[ist][ (-|nn-mm)]         list program, - lists backwards
                             nn-mm lists given lines
  up[ nn]                    move to higher frame
  down[ nn]                  move to lower frame
  fin[ish]                   return to outer frame
  tr[ace] (on|off)           set trace mode of current thread
  tr[ace] (on|off) all       set trace mode of all threads
  q[uit]                     exit from debugger
  v[ar] g[lobal]             show global variables
  v[ar] l[ocal]              show local variables
  v[ar] i[nstance] &lt;object&gt;  show instance variables of object
  v[ar] c[onst] &lt;object&gt;     show constants of object
  m[ethod] i[nstance] &lt;obj&gt;  show methods of object
  m[ethod] &lt;class|module&gt;    show instance methods of class or module
  th[read] l[ist]            list all threads
  th[read] c[ur[rent]]       show current thread
  th[read] [sw[itch]] &lt;nnn&gt;  switch thread context to nnn
  th[read] stop &lt;nnn&gt;        stop thread nnn
  th[read] resume &lt;nnn&gt;      resume thread nnn
  p expression               evaluate expression and print its value
  h[elp]                     print this help
  &lt;everything else&gt;          evaluate
(rdb:1)
</PRE>

<P>
Para evaluar una expresión:
<PRE>
(rdb:1) p 2*5
10
(rdb:1)
</PRE>

<P>
Para listar el programa:
<PRE>
(rdb:1) l
[-2, 7] in polar.rb
   1  
   2  
=&gt; 3  def c2p(x, y) 
   4    theta = Math.atan2(y, x)
   5    r     = Math.hypot(x, y)
   6    [r, theta]
   7  end
(rdb:1) l
[8, 17] in polar.rb
   8  x, y = 1, 1
   9  x, y = ARGV.map { |t| t.to_f }  if ARGV.length == 2 
   10  r, theta = c2p(x, y)
   11  
   12  puts "r = #{r} theta = #{theta}\n"
(rdb:1)
</PRE>

<P>
Para ejecutar una sentencia:

<P>
<PRE>
(rdb:1) n
polar.rb:8:x, y = 1, 1
(rdb:1) 
n
polar.rb:9:x, y = ARGV.map { |t| t.to_f }  if ARGV.length == 2 
(rdb:1) x
1
(rdb:1) y
1
(rdb:1)
</PRE>

<P>
Para examinar una expresión:
<PRE>
(rdb:1) ARGV
["1", "1"]
(rdb:1) ARGV.length
2
(rdb:1) p "43".to_f
43.0
</PRE>

<P>
Para probar e investigar:
<PRE>
(rdb:1) puts "hello" if ARGV.length == 2
hello
nil
</PRE>
Para investigar el funcionamiento de <code>map</code>:
<PRE>
(rdb:1) [1,8, 9].map { |x| x*x }
[1, 64, 81]
(rdb:1)
</PRE>

<P>
La sentencia con el <code>map</code> es en realidad un bucle:
<PRE>
(rdb:1) n
polar.rb:9:x, y = ARGV.map { |t| t.to_f }  if ARGV.length == 2 
(rdb:1) n
polar.rb:9:x, y = ARGV.map { |t| t.to_f }  if ARGV.length == 2 
(rdb:1) n
polar.rb:9:x, y = ARGV.map { |t| t.to_f }  if ARGV.length == 2 
(rdb:1) n
polar.rb:10:r, theta = c2p(x, y)
</PRE>
Para entrar al método usamos <code>s</code>:
<PRE>
(rdb:1) s
polar.rb:4:  theta = Math.atan2(y, x)
(rdb:1) n
polar.rb:5:  r     = Math.hypot(x, y)
(rdb:1) p theta
0.785398163397448
</PRE>
Para salir de la rutina usamos <code>finish</code>
que retorna al stackframe que envuelve al actual:
<PRE>
(rdb:1) fin
polar.rb:12:puts "r = #{r} theta = #{theta}\n"
</PRE>
Para continuar la ejecución hasta el siguiente punto de break usamos
<code>c</code>:
<PRE>
(rdb:1) c
r = 1.4142135623731 theta = 0.785398163397448
</PRE>

<P>
Con <code>b</code> podemos poner un punto de break:
<PRE>
[~/rubytesting]$ ruby -rdebug polar.rb 
Debug.rb
Emacs support available.

polar.rb:3:def c2p(x, y) 
(rdb:1) l
[-2, 7] in polar.rb
   1  #!
   2  
=&gt; 3  def c2p(x, y) 
   4    theta = Math.atan2(y, x)
   5    r     = Math.hypot(x, y)
   6    [r, theta]
   7  end
(rdb:1) l
[8, 17] in polar.rb
   8  x, y = 1, 1
   9  x, y = ARGV.map { |t| t.to_f }  if ARGV.length == 2 
   10  r, theta = c2p(x, y)
   11  
   12  puts "r = #{r} theta = #{theta}\n"
(rdb:1) b 4
Set breakpoint 1 at polar.rb:4
(rdb:1) c
Breakpoint 1, c2p at polar.rb:4
polar.rb:4:  theta = Math.atan2(y, x)
</PRE>
Con <code>w</code> podemos ver en que lugar estamos:
<PRE>
(rdb:1) w
--&gt; #1 polar.rb:4:in `c2p'
    #2 polar.rb:10
(rdb:1)
</PRE>

<P>

<H4><A NAME="SECTION02150010000000000000">
Véase</A>
</H4>
  

Para saber mas sobre el debugger consulta: 

<P>

<OL>
<LI>La sección <I>Debugging, Depurando</I>
<A HREF="node639.html#chapter:debugging">80</A>
de estos apuntes
</LI>
<LI>La sección <A NAME="2636"></A><A NAME="tex2html98"
  HREF="http://www.ruby-doc.org/docs/ProgrammingRuby/html/trouble.html">When Trouble Strikes</A>
del libro Programming Ruby
</LI>
<LI><A NAME="tex2html99"
  HREF="http://www.ibm.com/developerworks/opensource/tutorials/os-distruby/section3.html">http://www.ibm.com/developerworks/opensource/tutorials/os-distruby/section3.html</A>
</LI>
<LI><A NAME="tex2html100"
  HREF="http://ruby.about.com/od/advancedruby/a/debugging.htm">http://ruby.about.com/od/advancedruby/a/debugging.htm</A>.
</LI>
</OL>

<P>
<BR><HR>
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsecciones</STRONG></A>

<UL CLASS="ChildLinks">
<LI><UL>
<LI><UL>
<LI><A NAME="tex2html3599"
  HREF="node36.html#SECTION02150010000000000000">Véase</A>
</UL></UL></UL>
<!--End of Table of Child-Links-->

<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A NAME="tex2html3597"
  HREF="node37.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html3591"
  HREF="node26.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html3585"
  HREF="node35.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html3593"
  HREF="node792.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html3595"
  HREF="node795.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html29"
  HREF="http://tinyurl.com/lpp1415"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="LPP moodle"></A><A NAME="tex2html30"
  HREF="https://campusvirtual.ull.es/1415/course/view.php?id=5678"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="SYTW moodle"></A><A NAME="tex2html31"
  HREF="perlexamples.pdf"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="pdf"></A><A NAME="tex2html32"
  HREF="https://dl.dropbox.com/u/14539152/LPP/LPPbook/index.html"><IMG
  WIDTH="60" ALIGN="BOTTOM" BORDER="0"
 SRC="lupa.gif"
 ALT="ruby gems"></A><A NAME="tex2html33"
  HREF="http://www.ruby-doc.org/"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="perlonion.jpeg"
 ALT="perldoc"></A><A NAME="tex2html34"
  HREF="http://www.github.com"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="google-code-project-hosting.jpeg"
 ALT="github"></A><A NAME="tex2html35"
  HREF="http://rubylearning.com/blog/"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="perl6.jpg"
 ALT="blogs"></A><A NAME="tex2html36"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html37"
  HREF="http://www.ull.es/view/centros/etsii/Inicio/es"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html38"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html39"
  HREF="https://plus.google.com/u/0/communities/115470806071217401678"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="ull-etsii-grado-lpp-1314"></A><A NAME="tex2html40"
  HREF="https://plus.google.com/u/0/communities/109091480492072495700"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="ull-etsii-grado-stw-1314"></A>
<BR>
<B> Siguiente:</B> <A NAME="tex2html3598"
  HREF="node37.html">Averiguando que tiempo hace</A>
<B> Subir:</B> <A NAME="tex2html3592"
  HREF="node26.html">Introduccion</A>
<B> Anterior:</B> <A NAME="tex2html3586"
  HREF="node35.html">Lints in Ruby</A>
 &nbsp; <B>  <A NAME="tex2html3594"
  HREF="node792.html">&#205;ndice General</A></B> 
 &nbsp; <B>  <A NAME="tex2html3596"
  HREF="node795.html">&#205;ndice de Materias</A></B> </DIV>
<!--End of Navigation Panel-->
<ADDRESS>
Casiano Rodriguez León
2014-10-09
</ADDRESS>
</BODY>
</HTML>
