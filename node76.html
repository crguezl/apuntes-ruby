<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Práctica: Ordenar por Calificaciones</TITLE>
<META NAME="description" CONTENT="Práctica: Ordenar por Calificaciones">
<META NAME="keywords" CONTENT="perlexamples">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="mystyle.css">

<LINK REL="next" HREF="node77.html">
<LINK REL="previous" HREF="node75.html">
<LINK REL="up" HREF="node52.html">
<LINK REL="next" HREF="node77.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A NAME="tex2html4201"
  HREF="node77.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html4195"
  HREF="node52.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html4189"
  HREF="node75.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html4197"
  HREF="node783.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html4199"
  HREF="node786.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html29"
  HREF="http://tinyurl.com/lpp1415"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="LPP moodle"></A><A NAME="tex2html30"
  HREF="https://campusvirtual.ull.es/1415/course/view.php?id=5678"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="SYTW moodle"></A><A NAME="tex2html31"
  HREF="perlexamples.pdf"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="pdf"></A><A NAME="tex2html32"
  HREF="https://dl.dropbox.com/u/14539152/LPP/LPPbook/index.html"><IMG
  WIDTH="60" ALIGN="BOTTOM" BORDER="0"
 SRC="lupa.gif"
 ALT="ruby gems"></A><A NAME="tex2html33"
  HREF="http://www.ruby-doc.org/"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="perlonion.jpeg"
 ALT="perldoc"></A><A NAME="tex2html34"
  HREF="http://www.github.com"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="google-code-project-hosting.jpeg"
 ALT="github"></A><A NAME="tex2html35"
  HREF="http://rubylearning.com/blog/"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="perl6.jpg"
 ALT="blogs"></A><A NAME="tex2html36"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html37"
  HREF="http://www.ull.es/view/centros/etsii/Inicio/es"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html38"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html39"
  HREF="https://plus.google.com/u/0/communities/115470806071217401678"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="ull-etsii-grado-lpp-1314"></A><A NAME="tex2html40"
  HREF="https://plus.google.com/u/0/communities/109091480492072495700"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="ull-etsii-grado-stw-1314"></A>
<BR>
<B> Siguiente:</B> <A NAME="tex2html4202"
  HREF="node77.html">Ejercicios</A>
<B> Subir:</B> <A NAME="tex2html4196"
  HREF="node52.html">Tipos de Datos y</A>
<B> Anterior:</B> <A NAME="tex2html4190"
  HREF="node75.html">Ejercicios</A>
 &nbsp; <B>  <A NAME="tex2html4198"
  HREF="node783.html">&#205;ndice General</A></B> 
 &nbsp; <B>  <A NAME="tex2html4200"
  HREF="node786.html">&#205;ndice de Materias</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION023110000000000000000"></A>
   <A NAME="3851"></A>
<BR>
Práctica: Ordenar por Calificaciones
</H1>
  
Se tiene un fichero de entrada con calificaciones de alumnos como el que sigue:
<PRE>
Ferrer Pérez, Eduardo &amp; 9'6\\
García  García, Laura &amp; 7'5 \\
García Medina, Anai &amp; 6'5\\
García Rodríguez, Pedro &amp; 7'2\\
González del Castillo, Jorge &amp; 5'0\\
Hernández Pérez, Daniel &amp; 5'0\\
Marrero Díaz, Jose Antonio &amp; 8'0\\
Marrero Piñero, Sergio &amp; 7'2\\
Padrón Padrón, Adolfo &amp; 5'0\\
Pedrín Ruiz, Ana &amp; 9'6\\
Pedrínez Pérez, Ignacio &amp; 7'5\\
Piñero Piñero, Antonio &amp; 5'3\\
Pérez García, Adolfo &amp; 9'5\\
Pérez González, Germán &amp; 5'0\\
Pérez Pedrínez, Maria &amp; 5'0\\
Ramos Ramos, Ignacio &amp; 5'0\\
Rodríguez González, Andrés &amp; 10'0\\
Rodríguez Rodríguez, Jorge &amp; 9'2\\
</PRE>
Se pide escribir un programa que muestre el listado de alumnos ordenados
en orden decreciente de calificaciones.

<P>
Sugerencias:

<P>

<OL>
<LI>Puede leer el fichero completo en un array usando <code>readlines</code>:
<PRE>
&gt;&gt; f = File.open('notas')
=&gt; #&lt;File:notas&gt;
&gt;&gt; x = f.readlines
=&gt; ["Ferrer P\303\251rez, Eduardo &amp; 9'6\\\\\n", ... , "Rodr\303\255guez Rodr\303\255guez, Jorge &amp; 9'2\\\\\n"]
&gt;&gt; puts x[-1]
Rodríguez Rodríguez, Jorge &amp; 9'2\\
=&gt; nil
</PRE>
</LI>
<LI>Ahora deberá construir un hash indexado
en los nombres de los alumnos y cuyos valores sean las calificaciones:
<PRE>
&gt;&gt; y = x.map { |alu| alu =~ /(.*)\s+\&amp;\s+(\d+'\d*)/;  [$1, $2] }
=&gt; [["Ferrer P\303\251rez, Eduardo", "9'6"], ... , ["Rodr\303\255guez Rodr\303\255guez, Jorge", "9'2"]]
&gt;&gt; puts y[-1]
Rodríguez Rodríguez, Jorge
9'2
&gt;&gt; h =  Hash[*y.flatten]
=&gt; {"Pedr\303\255nez P\303\251rez, Ignacio"=&gt;"7'5", ... , "Marrero Pi\303\261ero, Sergio"=&gt;"7'2"}
&gt;&gt; h.keys
=&gt; ["Pedr\303\255nez P\303\251rez, Ignacio", ... , "Marrero Pi\303\261ero, Sergio"]
&gt;&gt; h["Pedr\303\255nez P\303\251rez, Ignacio"]
=&gt; "7'5"
</PRE>
</LI>
<LI>Ordene el hash en orden decreciente de calificaciones.
Observe que las números se han escrito según la convención española de usar apóstrofes
en vez del punto decimal. Una posibilidad es que utilices <A NAME="3852"></A><A NAME="tex2html199"
  HREF="http://ruby-doc.org/core-2.0.0/String.html#method-i-gsub"><TT>gsub</TT></A>
para hacer sustituciones
y convertir los apóstrofes en puntos:
<PRE>
&gt;&gt; "7'5".gsub(/(\d+)'(\d*)/, '\1.\2')
=&gt; "7.5"
&gt;&gt; "7".gsub(/(\d+)'(\d*)/, '\1.\2')
=&gt; "7"
</PRE>
</LI>
<LI>Es posible ordenar los elementos de un hash según sus claves:
<PRE>
irb(main):005:0&gt; h = {'a' =&gt; 3, 'b' =&gt;2, 'c' =&gt; 1}
=&gt; {"a"=&gt;3, "b"=&gt;2, "c"=&gt;1}
irb(main):008:0&gt; h.sort
=&gt; [["a", 3], ["b", 2], ["c", 1]]
</PRE>
Se puede pasar un bloque a <code>sort</code>. El bloque recibe los dos elementos
a comparar. Los elementos son parejas clave-valor:
<PRE>
irb(main):006:0&gt; h.sort { |a,b| a[0] &lt;=&gt; b[0] }
=&gt; [["a", 3], ["b", 2], ["c", 1]]
irb(main):007:0&gt; h.sort { |a,b| a[1] &lt;=&gt; b[1] }
=&gt; [["c", 1], ["b", 2], ["a", 3]]
</PRE>
</LI>
</OL>

<P>

<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A NAME="tex2html4201"
  HREF="node77.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html4195"
  HREF="node52.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html4189"
  HREF="node75.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html4197"
  HREF="node783.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html4199"
  HREF="node786.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html29"
  HREF="http://tinyurl.com/lpp1415"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="LPP moodle"></A><A NAME="tex2html30"
  HREF="https://campusvirtual.ull.es/1415/course/view.php?id=5678"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="SYTW moodle"></A><A NAME="tex2html31"
  HREF="perlexamples.pdf"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="pdf"></A><A NAME="tex2html32"
  HREF="https://dl.dropbox.com/u/14539152/LPP/LPPbook/index.html"><IMG
  WIDTH="60" ALIGN="BOTTOM" BORDER="0"
 SRC="lupa.gif"
 ALT="ruby gems"></A><A NAME="tex2html33"
  HREF="http://www.ruby-doc.org/"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="perlonion.jpeg"
 ALT="perldoc"></A><A NAME="tex2html34"
  HREF="http://www.github.com"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="google-code-project-hosting.jpeg"
 ALT="github"></A><A NAME="tex2html35"
  HREF="http://rubylearning.com/blog/"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="perl6.jpg"
 ALT="blogs"></A><A NAME="tex2html36"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html37"
  HREF="http://www.ull.es/view/centros/etsii/Inicio/es"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html38"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html39"
  HREF="https://plus.google.com/u/0/communities/115470806071217401678"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="ull-etsii-grado-lpp-1314"></A><A NAME="tex2html40"
  HREF="https://plus.google.com/u/0/communities/109091480492072495700"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="ull-etsii-grado-stw-1314"></A>
<BR>
<B> Siguiente:</B> <A NAME="tex2html4202"
  HREF="node77.html">Ejercicios</A>
<B> Subir:</B> <A NAME="tex2html4196"
  HREF="node52.html">Tipos de Datos y</A>
<B> Anterior:</B> <A NAME="tex2html4190"
  HREF="node75.html">Ejercicios</A>
 &nbsp; <B>  <A NAME="tex2html4198"
  HREF="node783.html">&#205;ndice General</A></B> 
 &nbsp; <B>  <A NAME="tex2html4200"
  HREF="node786.html">&#205;ndice de Materias</A></B> </DIV>
<!--End of Navigation Panel-->
<ADDRESS>
Casiano Rodriguez León
2014-09-29
</ADDRESS>
</BODY>
</HTML>
