<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Uso de Travis</TITLE>
<META NAME="description" CONTENT="Uso de Travis">
<META NAME="keywords" CONTENT="perlexamples">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="mystyle.css">

<LINK REL="next" HREF="node663.html">
<LINK REL="previous" HREF="node661.html">
<LINK REL="up" HREF="node661.html">
<LINK REL="next" HREF="node663.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A NAME="tex2html14200"
  HREF="node663.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html14194"
  HREF="node661.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html14188"
  HREF="node661.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html14196"
  HREF="node769.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html14198"
  HREF="node772.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html29"
  HREF="http://nereida.deioc.ull.es/~lpp/index.html"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="logoLPP.png"
 ALT="LPP"></A><A NAME="tex2html30"
  HREF="http://tinyurl.com/lpp1415"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="LPP moodle"></A><A NAME="tex2html31"
  HREF="https://campusvirtual.ull.es/1415/course/view.php?id=5678"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="SYTW moodle"></A><A NAME="tex2html32"
  HREF="perlexamples.pdf"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="pdf"></A><A NAME="tex2html33"
  HREF="https://dl.dropbox.com/u/14539152/LPP/LPPbook/index.html"><IMG
  WIDTH="60" ALIGN="BOTTOM" BORDER="0"
 SRC="lupa.gif"
 ALT="ruby gems"></A><A NAME="tex2html34"
  HREF="http://www.ruby-doc.org/"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="perlonion.jpeg"
 ALT="perldoc"></A><A NAME="tex2html35"
  HREF="http://www.github.com"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="google-code-project-hosting.jpeg"
 ALT="github"></A><A NAME="tex2html36"
  HREF="http://rubylearning.com/blog/"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="perl6.jpg"
 ALT="blogs"></A><A NAME="tex2html37"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html38"
  HREF="http://www.ull.es/view/centros/etsii/Inicio/es"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html39"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html40"
  HREF="https://plus.google.com/u/0/communities/115470806071217401678"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="ull-etsii-grado-lpp-1314"></A><A NAME="tex2html41"
  HREF="https://plus.google.com/u/0/communities/109091480492072495700"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="ull-etsii-grado-stw-1314"></A>
<BR>
<B> Siguiente:</B> <A NAME="tex2html14201"
  HREF="node663.html">Enlaces</A>
<B> Subir:</B> <A NAME="tex2html14195"
  HREF="node661.html">Integración Contínua: Travis</A>
<B> Anterior:</B> <A NAME="tex2html14189"
  HREF="node661.html">Integración Contínua: Travis</A>
 &nbsp; <B>  <A NAME="tex2html14197"
  HREF="node769.html">&#205;ndice General</A></B> 
 &nbsp; <B>  <A NAME="tex2html14199"
  HREF="node772.html">&#205;ndice de Materias</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION061510000000000000000"></A>
<A NAME="section:travis"></A>
<BR>
Uso de Travis
</H1>

<P>

<H4><A NAME="SECTION061510010000000000000">
Step one: Sign in</A>
</H4>
  

<P>
To get started with Travis CI, sign in through GitHub OAuth. Go to
<A NAME="tex2html1504"
  HREF="http://travis-ci.org/">Travis</A> CI and follow the <I>Sign In link at the top</I>.

<P>
GitHub will ask you to grant read and write access. Travis CI needs
write access for setting up service hooks for your repositories
when you request it, but it won't touch anything else.

<P>

<H4><A NAME="SECTION061510020000000000000">
Step two: Activate GitHub Service Hook</A>
</H4>
  

<P>
Once you're signed in go to your 
<A NAME="tex2html1506"
  HREF="https://travis-ci.org/profile">profile page</A>. 
You'll see a list
of your repositories. 

<P>
Flip the on/off switch for each repository
that you want to hook up on Travis CI. 

<P>
Then visit the GitHub 
<code>service hooks</code> page for that project 
(<code>repo -&gt; settings -&gt; Service Hooks</code> on the left)
and paste your GitHub username and
Travis token 
(en account-&gt;profile)
into the settings for the Travis service if it is not
already prefilled.

<P>

<DIV ALIGN="CENTER"><A NAME="figure:githubtokenfortravis"></A><A NAME="25236"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figura 87.1:</STRONG>
GitHub Service Hooks Page</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER">
<IMG
  WIDTH="472" HEIGHT="288" ALIGN="BOTTOM" BORDER="0"
 SRC="./githubtokenfortravis.png"
 ALT="Image githubtokenfortravis">

</DIV></TD></TR>
</TABLE>
</DIV>

<P>

<H4><A NAME="SECTION061510030000000000000">
Step three: Add <TT>.travis.yml</TT> file to your repository</A>
</H4>
  

<P>
In order for Travis to build your project, you need to tell the
system a little bit about it. 

<P>
To do so, add <code>.travis.yml</code> to the root
of your repository. 

<P>
We will only cover basic <code>.travis.yml</code> options
in this guide. 

<P>

<OL>
<LI>The most important one is the language key. It tells
Travis what builder to pick. 
</LI>
<LI>Ruby projects typically use different
build tools and practices than Clojure or PHP projects do, so Travis
needs to know what to do.
</LI>
<LI>If <code>.travis.yml</code> is not in the repository, is misspelled or is not
valid <A NAME="tex2html1507"
  HREF="http://en.wikipedia.org/wiki/YAML">YAML</A>, travis-ci.org will ignore it, assume Ruby as the language
and use default values for everything.
</LI>
</OL>

<P>
<PRE>
[~/srcLPP/coro/frac(master)]$ cat .travis.yml 
language: ruby
rvm:
  - 1.9.3
  - jruby-18mode # JRuby in 1.8 mode
  - jruby-19mode # JRuby in 1.9 mode
  - rbx-18mode
  - rbx-19mode
  - 1.8.7
</PRE>

<P>

<H4><A NAME="SECTION061510040000000000000">
Validate Your <TT>.travis.yml</TT></A>
</H4>
  

We recommend you use <code>travis-lint</code> 
(command-line tool) or 
<A NAME="tex2html1508"
  HREF="http://lint.travis-ci.org/">.travis.yml validation Web app </A>
to validate your <code>.travis.yml</code> file.

<P>
Get <code>travis-lint</code> with

<P>
<PRE>
    gem install travis-lint
</PRE>
and run it on your <code>.travis.yml</code>:

<P>
<PRE>
# inside a repository with .travis.yml
travis-lint
</PRE>

<P>
from any directory
<PRE>
travis-lint [path to your .travis.yml]
</PRE>
<code>travis-lint</code> will check things like

<P>

<OL>
<LI>The <code>.travis.yml</code> file is valid <A NAME="tex2html1509"
  HREF="http://en.wikipedia.org/wiki/YAML">YAML</A>
</LI>
<LI>The language key is present
</LI>
<LI>The runtime versions (Ruby, PHP, OTP, etc) specified are supported
in the 
<A NAME="tex2html1510"
  HREF="http://about.travis-ci.org/docs/user/ci-environment/">Travis CI Environment</A>
</LI>
<LI>That you are not using deprecated features or runtime aliases
and so on. 
</LI>
</OL>

<P>
<code>travis-lint</code> is your friend, use it.

<P>

<H4><A NAME="SECTION061510050000000000000">
Default Test Script</A>
</H4>
  

<P>
Travis will use <code>Bundler</code> to install your project's dependencies and
run <code>rake</code> by default to execute your tests. 

<P>
Please note that <SPAN  CLASS="textbf">you
need to add</SPAN> <code>rake</code> to your <code>Gemfile</code> 
(adding it to just <code>:test</code> group
should be sufficient).
<PRE>
group :development, :test do
  gem "rake"
end
</PRE>
Groups can be ignored by <code>bundle</code>
at install-time (<code>using --without=GROUP1[ GROUP2...]</code>).

<P>
<PRE>
[~/srcLPP/coro/frac(master)]$ cat Gemfile 
source 'https://rubygems.org'

gem 'rake'
gem 'rspec'
</PRE>

<P>
Exclude non-essential gems like <code>ruby-debug</code> from your <code>Gemfile</code>.

<P>

<H4><A NAME="SECTION061510060000000000000">
Testing Against Multiple Versions of Gems</A>
</H4>
  

Many projects need to be tested against multiple versions of 
<A NAME="tex2html1511"
  HREF="http://rack.rubyforge.org/doc/">Rack</A>, <A NAME="tex2html1512"
  HREF="http://eventmachine.rubyforge.org/">Event::Machine</A>, HAML, Sinatra, Ruby on Rails, 
you name it. You can
do it with Travis CI.
See the manual pages.

<OL>
<LI>Create a directory in your project's repository root where you will keep gemfiles (<code>./gemfiles</code>
 is a commonly used name)
</LI>
<LI>Add one or more gemfiles to it
</LI>
<LI>Instruct Travis CI to use those gemfiles using the gemfile option in your <code>.travis.yml</code>
<PRE>
gemfile:
  - Gemfile
  - gemfiles/eventmachine-pre
</PRE>
</LI>
</OL>

<P>

<H4><A NAME="SECTION061510070000000000000">
Custom Bundler arguments and Gemfile locations</A>
</H4>
  

<A NAME="parrafo:travisbundlerargs"></A>You can specify a custom Gemfile name:

<P>
<PRE>
gemfile: gemfiles/Gemfile.ci
</PRE>
Unless specified, the worker will look for a file named <code>Gemfile</code> in the root of your project.

<P>
You can also set extra arguments to be passed to bundle install:

<P>
<PRE>
bundler_args: --without=development
</PRE>

<P>

<H4><A NAME="SECTION061510080000000000000">
Rakefile</A>
</H4>
  

<PRE>
john@exthost:~/291012/frac$ rake -T
rake spec     # Run RSpec code examples
rake specman  # Run rspec with --format documentation
rake thtml    # Run rspec with format: html
</PRE>

<P>
<PRE>
john@exthost:~/291012/frac$ cat Rakefile 
$:.unshift File.dirname(__FILE__) + 'lib'

require 'rspec/core/rake_task'
RSpec::Core::RakeTask.new
task :default =&gt; :spec

desc "Run rspec with --format documentation"
task :specman do
  sh "rspec -Ilib spec/frac_spec.rb --format documentation"
end

desc "Run rspec with format: html"
task :thtml do
  sh "rspec -Ilib spec/frac_.rb --format html &gt; index.html"
end
</PRE>
Véase la documentación de la clase 
<A NAME="tex2html1513"
  HREF="http://rdoc.info/github/rspec/rspec-core/RSpec/Core/RakeTask">RSpec::Core::RakeTask</A>.

<P>
<PRE>
john@exthost:~/291012/frac$ rake
/usr/local/ruby/bin/ruby -S rspec ./spec/frac_spec.rb
....................

Finished in 0.00451 seconds
20 examples, 0 failures
john@exthost:~/291012/frac$
</PRE>

<P>

<H4><A NAME="SECTION061510090000000000000">
Ejemplo de Jerarquía</A>
</H4>
  

<PRE>
[~/srcLPP/coro/frac(master)]$ tree -A
.
|-- Gemfile
|-- README
|-- Rakefile
|-- lib
|   `-- fraction.rb
`-- spec
    `-- frac_spec.rb

2 directories, 5 files
</PRE>

<P>

<H4><A NAME="SECTION0615100100000000000000">
Página de Travis Mostrando los Resultados de unas Pruebas con Rspec</A>
</H4>
  

<P>

<DIV ALIGN="CENTER"><A NAME="figure:rdoc1"></A><A NAME="25297"></A>
<TABLE>
<CAPTION ALIGN="BOTTOM"><STRONG>Figura:</STRONG>
Página de Travis Mostrando los Resultados de unas Pruebas con Rspec</CAPTION>
<TR><TD>
<DIV ALIGN="CENTER">
<IMG
  WIDTH="678" HEIGHT="426" ALIGN="BOTTOM" BORDER="0"
 SRC="./travis.png"
 ALT="Image travis">

</DIV></TD></TR>
</TABLE>
</DIV>

<P>
<BR><HR>
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><STRONG>Subsecciones</STRONG></A>

<UL CLASS="ChildLinks">
<LI><UL>
<LI><UL>
<LI><A NAME="tex2html14202"
  HREF="node662.html#SECTION061510010000000000000">Step one: Sign in</A>
<LI><A NAME="tex2html14203"
  HREF="node662.html#SECTION061510020000000000000">Step two: Activate GitHub Service Hook</A>
<LI><A NAME="tex2html14204"
  HREF="node662.html#SECTION061510030000000000000">Step three: Add <TT>.travis.yml</TT> file to your repository</A>
<LI><A NAME="tex2html14205"
  HREF="node662.html#SECTION061510040000000000000">Validate Your <TT>.travis.yml</TT></A>
<LI><A NAME="tex2html14206"
  HREF="node662.html#SECTION061510050000000000000">Default Test Script</A>
<LI><A NAME="tex2html14207"
  HREF="node662.html#SECTION061510060000000000000">Testing Against Multiple Versions of Gems</A>
<LI><A NAME="tex2html14208"
  HREF="node662.html#SECTION061510070000000000000">Custom Bundler arguments and Gemfile locations</A>
<LI><A NAME="tex2html14209"
  HREF="node662.html#SECTION061510080000000000000">Rakefile</A>
<LI><A NAME="tex2html14210"
  HREF="node662.html#SECTION061510090000000000000">Ejemplo de Jerarquía</A>
<LI><A NAME="tex2html14211"
  HREF="node662.html#SECTION0615100100000000000000">Página de Travis Mostrando los Resultados de unas Pruebas con Rspec</A>
</UL></UL></UL>
<!--End of Table of Child-Links-->

<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A NAME="tex2html14200"
  HREF="node663.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html14194"
  HREF="node661.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html14188"
  HREF="node661.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html14196"
  HREF="node769.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html14198"
  HREF="node772.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html29"
  HREF="http://nereida.deioc.ull.es/~lpp/index.html"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="logoLPP.png"
 ALT="LPP"></A><A NAME="tex2html30"
  HREF="http://tinyurl.com/lpp1415"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="LPP moodle"></A><A NAME="tex2html31"
  HREF="https://campusvirtual.ull.es/1415/course/view.php?id=5678"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="SYTW moodle"></A><A NAME="tex2html32"
  HREF="perlexamples.pdf"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="pdf"></A><A NAME="tex2html33"
  HREF="https://dl.dropbox.com/u/14539152/LPP/LPPbook/index.html"><IMG
  WIDTH="60" ALIGN="BOTTOM" BORDER="0"
 SRC="lupa.gif"
 ALT="ruby gems"></A><A NAME="tex2html34"
  HREF="http://www.ruby-doc.org/"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="perlonion.jpeg"
 ALT="perldoc"></A><A NAME="tex2html35"
  HREF="http://www.github.com"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="google-code-project-hosting.jpeg"
 ALT="github"></A><A NAME="tex2html36"
  HREF="http://rubylearning.com/blog/"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="perl6.jpg"
 ALT="blogs"></A><A NAME="tex2html37"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html38"
  HREF="http://www.ull.es/view/centros/etsii/Inicio/es"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html39"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html40"
  HREF="https://plus.google.com/u/0/communities/115470806071217401678"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="ull-etsii-grado-lpp-1314"></A><A NAME="tex2html41"
  HREF="https://plus.google.com/u/0/communities/109091480492072495700"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="ull-etsii-grado-stw-1314"></A>
<BR>
<B> Siguiente:</B> <A NAME="tex2html14201"
  HREF="node663.html">Enlaces</A>
<B> Subir:</B> <A NAME="tex2html14195"
  HREF="node661.html">Integración Contínua: Travis</A>
<B> Anterior:</B> <A NAME="tex2html14189"
  HREF="node661.html">Integración Contínua: Travis</A>
 &nbsp; <B>  <A NAME="tex2html14197"
  HREF="node769.html">&#205;ndice General</A></B> 
 &nbsp; <B>  <A NAME="tex2html14199"
  HREF="node772.html">&#205;ndice de Materias</A></B> </DIV>
<!--End of Navigation Panel-->
<ADDRESS>
Casiano Rodriguez León
2014-09-11
</ADDRESS>
</BODY>
</HTML>
