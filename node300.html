
<H1><A NAME="SECTION021350000000000000000">
Colas</A>
</H1>

<P>

<H4><A NAME="SECTION021350010000000000000">
Las Clases </A><A NAME="tex2html641"
  HREF="http://ruby-doc.org/stdlib-2.0.0/libdoc/thread/rdoc/Queue.html"><TT>Queue</TT></A>y <A NAME="tex2html642"
  HREF="http://ruby-doc.org/stdlib-2.0.0/libdoc/thread/rdoc/SizedQueue.html"><TT>SizedQueue</TT></A>
</H4>
  <TABLE CELLPADDING=3>
</TABLE>


<OL>
<LI>The standard <A NAME="tex2html643"
  HREF="http://ruby-doc.org/core-2.0.0/Thread.html"><TT>Thread</TT></A><#11758#><#11758#> library defines the <A NAME="tex2html644"
  HREF="http://ruby-doc.org/stdlib-2.0.0/libdoc/thread/rdoc/Queue.html"><TT>Queue</TT></A><#11759#><#11759#> and <A NAME="tex2html645"
  HREF="http://ruby-doc.org/stdlib-2.0.0/libdoc/thread/rdoc/SizedQueue.html"><TT>SizedQueue</TT></A><#11760#><#11760#> data
structures specifically for concurrent programming. 

<P>
</LI>
<LI>They implement
thread-safe FIFO queues and are intended for a producer/consumer
model of programming. 

<P>
</LI>
<LI>Under this model, one thread
produces values of some sort and places them on a queue with the <tex2html_verb_mark>1323<tex2html_verb_mark> (enqueue) method or its synonym <tex2html_verb_mark>1324<tex2html_verb_mark>. 

<P>
</LI>
<LI>Another thread “consumes” these values, removing them from the queue with the <tex2html_verb_mark>1325<tex2html_verb_mark> (dequeue) method as needed. 
(The <tex2html_verb_mark>1326<tex2html_verb_mark> and <tex2html_verb_mark>1327<tex2html_verb_mark> methods are synonyms for <tex2html_verb_mark>1328<tex2html_verb_mark>.)

<P>
</LI>
<LI>The key features of <A NAME="tex2html646"
  HREF="http://ruby-doc.org/stdlib-2.0.0/libdoc/thread/rdoc/Queue.html"><TT>Queue</TT></A><#11761#><#11761#> that make it suitable for concurrent
programming is that the <tex2html_verb_mark>1329<tex2html_verb_mark> method blocks if the queue is
empty and waits until the producer thread adds a value to the queue.

<P>
</LI>
<LI>The <A NAME="tex2html647"
  HREF="http://ruby-doc.org/stdlib-2.0.0/libdoc/thread/rdoc/Queue.html"><TT>Queue</TT></A><#11762#><#11762#> and <A NAME="tex2html648"
  HREF="http://ruby-doc.org/stdlib-2.0.0/libdoc/thread/rdoc/SizedQueue.html"><TT>SizedQueue</TT></A><#11763#><#11763#> classes implement the same basic
API, but the <A NAME="tex2html649"
  HREF="http://ruby-doc.org/stdlib-2.0.0/libdoc/thread/rdoc/SizedQueue.html"><TT>SizedQueue</TT></A><#11764#><#11764#> variant has a maximum size.
</LI>
<LI>If the queue
is already at its maximum size, then the method for adding a value
to the queue will block until the consumer thread removes a value
from the queue.
</LI>
</OL>

<P>

<H4><A NAME="SECTION021350020000000000000">
Example: A Threaded Map-Reduce</A>
</H4>
  <TABLE CELLPADDING=3>
</TABLE>


<P>

<OL>
<LI>We now define a method that combines a concurrent <tex2html_verb_mark>1330<tex2html_verb_mark> with
a concurrent <tex2html_verb_mark>1331<tex2html_verb_mark>. 

<P>
</LI>
<LI>It creates a thread for each element
of the enumerable collection and uses that thread to apply a mapping
<A NAME="tex2html650"
  HREF="http://ruby-doc.org/core-2.0.0/Proc.html"><TT>Proc</TT></A><#11768#><#11768#>. 

<P>
</LI>
<LI>The value returned by that <A NAME="tex2html651"
  HREF="http://ruby-doc.org/core-2.0.0/Proc.html"><TT>Proc</TT></A><#11769#><#11769#> is enqueued on a <A NAME="tex2html652"
  HREF="http://ruby-doc.org/stdlib-2.0.0/libdoc/thread/rdoc/Queue.html"><TT>Queue</TT></A><#11770#><#11770#>
object. 

<P>
</LI>
<LI>One final thread acts as a consumer; it removes values from
the queue and passes them to the injection <A NAME="tex2html653"
  HREF="http://ruby-doc.org/core-2.0.0/Proc.html"><TT>Proc</TT></A><#11771#><#11771#> as they become
available.
</LI>
</OL>

<P>
Ejemplo de uso:
<PRE><tex2html_verbatim_mark>verbatim1238#</PRE>

<P>
Código:
<PRE><tex2html_verbatim_mark>verbatim1239#</PRE>

<P>
