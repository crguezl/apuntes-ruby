<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<!--Converted with LaTeX2HTML 2008 (1.71)
original version by:  Nikos Drakos, CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippmann, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Averiguando que tiempo hace</TITLE>
<META NAME="description" CONTENT="Averiguando que tiempo hace">
<META NAME="keywords" CONTENT="perlexamples">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">

<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=utf-8">
<META NAME="Generator" CONTENT="LaTeX2HTML v2008">
<META HTTP-EQUIV="Content-Style-Type" CONTENT="text/css">

<LINK REL="STYLESHEET" HREF="mystyle.css">

<LINK REL="next" HREF="node38.html">
<LINK REL="previous" HREF="node36.html">
<LINK REL="up" HREF="node26.html">
<LINK REL="next" HREF="node38.html">
</HEAD>

<BODY >

<DIV CLASS="navigation"><!--Navigation Panel-->
<A NAME="tex2html3874"
  HREF="node38.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html3868"
  HREF="node26.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html3862"
  HREF="node36.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html3870"
  HREF="node851.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html3872"
  HREF="node854.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html29"
  HREF="http://tinyurl.com/lpp1415"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="LPP moodle"></A><A NAME="tex2html30"
  HREF="https://campusvirtual.ull.es/1415/course/view.php?id=5678"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="SYTW moodle"></A><A NAME="tex2html31"
  HREF="perlexamples.pdf"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="pdf"></A><A NAME="tex2html32"
  HREF="https://dl.dropbox.com/u/14539152/LPP/LPPbook/index.html"><IMG
  WIDTH="60" ALIGN="BOTTOM" BORDER="0"
 SRC="lupa.gif"
 ALT="ruby gems"></A><A NAME="tex2html33"
  HREF="http://www.ruby-doc.org/"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="perlonion.jpeg"
 ALT="perldoc"></A><A NAME="tex2html34"
  HREF="http://www.github.com"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="google-code-project-hosting.jpeg"
 ALT="github"></A><A NAME="tex2html35"
  HREF="http://rubylearning.com/blog/"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="perl6.jpg"
 ALT="blogs"></A><A NAME="tex2html36"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html37"
  HREF="http://www.ull.es/view/centros/etsii/Inicio/es"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html38"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html39"
  HREF="https://plus.google.com/u/0/communities/115470806071217401678"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="ull-etsii-grado-lpp-1314"></A><A NAME="tex2html40"
  HREF="https://plus.google.com/u/0/communities/109091480492072495700"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="ull-etsii-grado-stw-1314"></A>
<BR>
<B> Siguiente:</B> <A NAME="tex2html3875"
  HREF="node38.html">Ejercicios: Expresiones Regulares. Un</A>
<B> Subir:</B> <A NAME="tex2html3869"
  HREF="node26.html">Introduccion</A>
<B> Anterior:</B> <A NAME="tex2html3863"
  HREF="node36.html">Ejecución de un Programa</A>
 &nbsp; <B>  <A NAME="tex2html3871"
  HREF="node851.html">&#205;ndice General</A></B> 
 &nbsp; <B>  <A NAME="tex2html3873"
  HREF="node854.html">&#205;ndice de Materias</A></B> 
<BR>
<BR></DIV>
<!--End of Navigation Panel-->

<H1><A NAME="SECTION02160000000000000000"></A>
<A NAME="section:openweathermap"></A>
<BR>
Averiguando que tiempo hace
</H1>

<P>

<UL>
<LI><A NAME="tex2html105"
  HREF="http://openweathermap.org/">http://openweathermap.org/</A>:
<A NAME="tex2html106"
  HREF="http://openweathermap.org/current">Call current weather data for one location</A>
</LI>
<LI><A NAME="tex2html107"
  HREF="http://ruby-doc.org/stdlib-2.1.2/libdoc/open-uri/rdoc/OpenURI.html">OpenURI</A>
is an easy-to-use wrapper for 
<A NAME="tex2html108"
  HREF="http://ruby-doc.org/stdlib-2.1.3/libdoc/net/http/rdoc/Net/HTTP.html">Net::HTTP</A>, 
Net::HTTPS and Net::FTP.

<P>
Véase la 
<A NAME="tex2html109"
  HREF="http://ruby-doc.org/stdlib-2.1.3/libdoc/open-uri/rdoc/index.html">Documentación</A>
</LI>
<LI><A NAME="tex2html110"
  HREF="http://www.ruby-doc.org/stdlib-2.0/libdoc/json/rdoc/JSON.html">JSON</A>
is a lightweight data-interchange format. It is easy for us humans to read and write. Plus, equally simple for machines to generate or parse. JSON is completely language agnostic, making it the ideal interchange format.
</LI>
<LI><A NAME="tex2html111"
  HREF="https://github.com/tenderlove/psych">Psych</A>
is a YAML parser and emitter. Psych leverages libyaml for its YAML parsing and emitting capabilities. In addition to wrapping libyaml, Psych also knows how to serialize and de-serialize most Ruby objects to and from the YAML format.
</LI>
</UL>

<P>
<PRE>
[~/rubytesting]$ cat wheater.rb 
require 'open-uri'
require 'json'
require 'psych'

city = 'san cristobal de la laguna,spain'.gsub(/\s/,'%20')
request = "http://api.openweathermap.org/data/2.5/weather?q=#{city}&amp;units=metric"
response = open(request).readlines.join
print Psych.dump( JSON.parse(response) )
</PRE>

<P>
<PRE>
[~/rubytesting]$ pry
[1] pry(main)&gt; require 'open-uri'
=&gt; true
[2] pry(main)&gt; require 'json'
=&gt; true
[3] pry(main)&gt; require 'psych'
=&gt; true
</PRE>

<P>
<PRE>
[4] pry(main)&gt; city = 'san cristobal de la laguna,spain'.gsub(/\s/,'%20')
=&gt; "san%20cristobal%20de%20la%20laguna,spain"
</PRE>

<P>
<PRE>
[5] pry(main)&gt; request = "http://api.openweathermap.org/data/2.5/weather?q=#{city}&amp;units=metric"
=&gt; "http://api.openweathermap.org/data/2.5/weather?q=san%20cristobal%20de%20la%20laguna,spain&amp;units=metric"
</PRE>

<P>
<PRE>
[6] pry(main)&gt; f = open(request)
=&gt; #&lt;StringIO:0x007fdee29fc4a0
 @base_uri=
  #&lt;URI::HTTP:0x007fdee29fc720 URL:http://api.openweathermap.org/data/2.5/weather?q=san%20cristobal%20de%20la%20laguna,spain&amp;units=metric&gt;,
 @meta=
  {"server"=&gt;"nginx",
   "date"=&gt;"Tue, 07 Oct 2014 10:30:15 GMT",
   "content-type"=&gt;"application/json; charset=utf-8",
   "transfer-encoding"=&gt;"chunked",
   "connection"=&gt;"keep-alive",
   "x-source"=&gt;"redis",
   "access-control-allow-origin"=&gt;"*",
   "access-control-allow-credentials"=&gt;"true",
   "access-control-allow-methods"=&gt;"GET, POST"},
 @metas=
  {"server"=&gt;["nginx"],
   "date"=&gt;["Tue, 07 Oct 2014 10:30:15 GMT"],
   "content-type"=&gt;["application/json; charset=utf-8"],
   "transfer-encoding"=&gt;["chunked"],
   "connection"=&gt;["keep-alive"],
   "x-source"=&gt;["redis"],
   "access-control-allow-origin"=&gt;["*"],
   "access-control-allow-credentials"=&gt;["true"],
   "access-control-allow-methods"=&gt;["GET, POST"]},
 @status=["200", "OK"]&gt;
</PRE>

<P>
<PRE>
[7] pry(main)&gt; a = f.readlines
=&gt; ["{\"coord\":{\"lon\":-16.31,\"lat\":28.49},\"sys\":{\"type\":3,\"id\":5518,\"message\":0.1935,\"country\":\"Spain\",\"sunrise\":1412665299,\"sunset\":1412707453},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken
clouds\",\"icon\":\"04d\"}],\"base\":\"cmc
stations\",\"main\":{\"temp\":24,\"pressure\":1018,\"humidity\":73,\"temp_min\":24,\"temp_max\":24},\"wind\":{\"speed\":4.1,\"deg\":80},\"clouds\":{\"all\":75},\"dt\":1412674200,\"id\":2511401,\"name\":\"San Cristóbal de la Laguna\",\"cod\":200}\n"]
</PRE>

<P>

<DIV CLASS="navigation"><HR>
<!--Navigation Panel-->
<A NAME="tex2html3874"
  HREF="node38.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next" SRC="next.png"></A> 
<A NAME="tex2html3868"
  HREF="node26.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up" SRC="up.png"></A> 
<A NAME="tex2html3862"
  HREF="node36.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous" SRC="prev.png"></A> 
<A NAME="tex2html3870"
  HREF="node851.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents" SRC="contents.png"></A> 
<A NAME="tex2html3872"
  HREF="node854.html">
<IMG WIDTH="43" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="index" SRC="index.png"></A> <A NAME="tex2html29"
  HREF="http://tinyurl.com/lpp1415"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="LPP moodle"></A><A NAME="tex2html30"
  HREF="https://campusvirtual.ull.es/1415/course/view.php?id=5678"><IMG
  WIDTH="50" ALIGN="BOTTOM" BORDER="0"
 SRC="moodleLHPlogo.jpeg"
 ALT="SYTW moodle"></A><A NAME="tex2html31"
  HREF="perlexamples.pdf"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="gv.jpeg"
 ALT="pdf"></A><A NAME="tex2html32"
  HREF="https://dl.dropbox.com/u/14539152/LPP/LPPbook/index.html"><IMG
  WIDTH="60" ALIGN="BOTTOM" BORDER="0"
 SRC="lupa.gif"
 ALT="ruby gems"></A><A NAME="tex2html33"
  HREF="http://www.ruby-doc.org/"><IMG
  WIDTH="30" ALIGN="BOTTOM" BORDER="0"
 SRC="perlonion.jpeg"
 ALT="perldoc"></A><A NAME="tex2html34"
  HREF="http://www.github.com"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="google-code-project-hosting.jpeg"
 ALT="github"></A><A NAME="tex2html35"
  HREF="http://rubylearning.com/blog/"><IMG
  WIDTH="27" ALIGN="BOTTOM" BORDER="0"
 SRC="perl6.jpg"
 ALT="blogs"></A><A NAME="tex2html36"
  HREF="http://www.google.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ggoogle.gif"
 ALT="google"></A><A NAME="tex2html37"
  HREF="http://www.ull.es/view/centros/etsii/Inicio/es"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="etsii.png"
 ALT="etsii"></A><A NAME="tex2html38"
  HREF="http://www.ull.es/"><IMG
  WIDTH="35" ALIGN="BOTTOM" BORDER="0"
 SRC="ull.gif"
 ALT="ull"></A><A NAME="tex2html39"
  HREF="https://plus.google.com/u/0/communities/115470806071217401678"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="ull-etsii-grado-lpp-1314"></A><A NAME="tex2html40"
  HREF="https://plus.google.com/u/0/communities/109091480492072495700"><IMG
  WIDTH="32" ALIGN="BOTTOM" BORDER="0"
 SRC="logopcgull.gif"
 ALT="ull-etsii-grado-stw-1314"></A>
<BR>
<B> Siguiente:</B> <A NAME="tex2html3875"
  HREF="node38.html">Ejercicios: Expresiones Regulares. Un</A>
<B> Subir:</B> <A NAME="tex2html3869"
  HREF="node26.html">Introduccion</A>
<B> Anterior:</B> <A NAME="tex2html3863"
  HREF="node36.html">Ejecución de un Programa</A>
 &nbsp; <B>  <A NAME="tex2html3871"
  HREF="node851.html">&#205;ndice General</A></B> 
 &nbsp; <B>  <A NAME="tex2html3873"
  HREF="node854.html">&#205;ndice de Materias</A></B> </DIV>
<!--End of Navigation Panel-->
<ADDRESS>
Casiano Rodriguez León
2014-12-11
</ADDRESS>
</BODY>
</HTML>
