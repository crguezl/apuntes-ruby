
<H2><A NAME="SECTION02695000000000000000">
Símbolos, Métodos y Procs</A>
</H2>

<P>

<H3><A NAME="SECTION02695100000000000000">
to_proc</A>
</H3>

<P>

<OL>
<LI>El método <A NAME="5659"><tex2html_anchor_invisible_mark></A><A NAME="tex2html302"
  HREF="http://ruby-doc.org/core-2.0.0/Object.html#method-i-method"><TT>method</TT></A>
recibe un <A NAME="tex2html303"
  HREF="http://ruby-doc.org/core-2.0.0/Symbol.html"><TT>Symbol</TT></A><#5055#><#5055#> que sea el nombre de un método y devuelve un objeto <A NAME="tex2html304"
  HREF="http://ruby-doc.org/core-2.0.0/Method.html"><TT>Method</TT></A><#5056#><#5056#>
</LI>
<LI>Ruby 1.9 añade el método <A NAME="5669"><tex2html_anchor_invisible_mark></A><A NAME="tex2html305"
  HREF="http://ruby-doc.org/core-2.0.0/Symbol.html#method-i-to_proc"><TT>to_proc</TT></A>
a la clase <A NAME="tex2html306"
  HREF="http://ruby-doc.org/core-2.0.0/Symbol.html"><TT>Symbol</TT></A><#5058#><#5058#>
</LI>
<LI>Este método <A NAME="5676"><tex2html_anchor_invisible_mark></A><A NAME="tex2html307"
  HREF="http://ruby-doc.org/core-2.0.0/Symbol.html#method-i-to_proc"><TT>to_proc</TT></A>
permite que un símbolo prefijado con <tex2html_verb_mark>454<tex2html_verb_mark> pueda
pasarse como bloque a un iterador
</LI>
</OL>

<P>
<PRE><tex2html_verbatim_mark>verbatim606#</PRE>
que es equivalente a:
<PRE><tex2html_verbatim_mark>verbatim607#</PRE>
El método <tex2html_verb_mark>455<tex2html_verb_mark> podría implementarse así:
<PRE><tex2html_verbatim_mark>verbatim608#</PRE>

<UL>
<LI>El método <A NAME="5680"><tex2html_anchor_invisible_mark></A><A NAME="tex2html308"
  HREF="http://ruby-doc.org/core-2.0.0/Object.html#method-i-send"><TT>send</TT></A>
es un método de la clase <A NAME="tex2html309"
  HREF="http://ruby-doc.org/core-2.0.0/Object.html"><TT>Object</TT></A><#5069#><#5069#>:
<PRE><tex2html_verbatim_mark>verbatim609#</PRE>
</LI>
<LI><A NAME="5687"><tex2html_anchor_invisible_mark></A><A NAME="tex2html310"
  HREF="http://ruby-doc.org/core-2.0.0/Object.html#method-i-__send__"><TT>__send__</TT></A>
es un sinónimo de <tex2html_verb_mark>456<tex2html_verb_mark>.
</LI>
<LI><A NAME="5691"><tex2html_anchor_invisible_mark></A><A NAME="tex2html311"
  HREF="http://ruby-doc.org/core-2.0.0/Object.html#method-i-public_send"><TT>public_send</TT></A>
sólo invoca métodos públicos, no privados ni protegidos.
</LI>
</UL>

<P>
También podríamos implementar <tex2html_verb_mark>457<tex2html_verb_mark> usando el método <A NAME="5695"><tex2html_anchor_invisible_mark></A><A NAME="tex2html312"
  HREF="http://ruby-doc.org/core-2.0.0/Object.html#method-i-method"><TT>method</TT></A>de la clase
<A NAME="tex2html313"
  HREF="http://ruby-doc.org/core-2.0.0/Object.html"><TT>Object</TT></A><#5076#><#5076#>:
<PRE><tex2html_verbatim_mark>verbatim610#</PRE>

<P>

<H3><A NAME="SECTION02695200000000000000">
Accediendo a una Clase como una Colección de Métodos</A>
</H3>
En el siguiente ejemplo, definiremos <tex2html_verb_mark>458<tex2html_verb_mark> en la clase <tex2html_verb_mark>459<tex2html_verb_mark>
para que podamos escribir:
<PRE><tex2html_verbatim_mark>verbatim611#</PRE>
Para ello basta con hacer un <tex2html_verb_mark>460<tex2html_verb_mark> <A NAME="5702"><tex2html_anchor_invisible_mark></A><A NAME="tex2html314"
  HREF="http://ruby-doc.org/core-2.0.0/Module.html#method-i-instance_method"><TT>instance_method</TT></A>
<PRE><tex2html_verbatim_mark>verbatim612#</PRE>
El método retornado por <tex2html_verb_mark>461<tex2html_verb_mark> es un <A NAME="tex2html315"
  HREF="http://ruby-doc.org/core-2.0.0/UnboundMethod.html"><TT>UnboundMethod</TT></A><#5085#><#5085#>.
Puesto que el método retornado no tiene <A NAME="tex2html316"
  HREF="http://ruby-doc.org/core-2.0.0/Binding.html"><TT>Binding</TT></A><#5086#><#5086#>,
es necesario llamar al método <A NAME="5712"><tex2html_anchor_invisible_mark></A><A NAME="tex2html317"
  HREF="http://ruby-doc.org/core-2.0.0/UnboundMethod.html#method-i-bind"><TT>bind</TT></A>
sobre un objeto para ligarlo.

<P>
Es posible llevar esta analogía, usando el <A NAME="tex2html318"
  HREF="http://ruby-doc.org/core-2.0.0/UnboundMethod.html"><TT>UnboundMethod</TT></A><#5088#><#5088#> a su vez como 
hash usando este alias:
<PRE><tex2html_verbatim_mark>verbatim613#</PRE>

<P>
Resulta tentador definir también
el operador  <SPAN  CLASS="textit">asignación a elementos de una colección</SPAN> <tex2html_verb_mark>462<tex2html_verb_mark> para definir métodos:
<PRE><tex2html_verbatim_mark>verbatim614#</PRE>
El método <tex2html_verb_mark>463<tex2html_verb_mark> es un método privado de <A NAME="tex2html319"
  HREF="http://ruby-doc.org/core-2.0.0/Module.html"><TT>Module</TT></A><#5094#><#5094#>:
<PRE><tex2html_verbatim_mark>verbatim615#</PRE>

<P>
En la línea 4 <tex2html_verb_mark>464<tex2html_verb_mark> es el objeto módulo sobre el que estamos definiendo el método (por ejemplo
<A NAME="tex2html320"
  HREF="http://ruby-doc.org/core-2.0.0/String.html"><TT>String</TT></A><#5097#><#5097#> en la llamada de la línea 9: recuerde que toda clase es un módulo).

<P>
Con esta definición de <tex2html_verb_mark>465<tex2html_verb_mark>  podemos escribir:
<PRE><tex2html_verbatim_mark>verbatim616#</PRE>

<P>

<H3><A NAME="SECTION02695300000000000000">
Viendo los (Nombres de) Métodos como Colecciones de Objetos</A>
</H3>
Visto lo anterior surge la idea de hacer algo similar para los métodos singleton de los objetos.
La primera idea sería definir <tex2html_verb_mark>466<tex2html_verb_mark> y <tex2html_verb_mark>467<tex2html_verb_mark> en la clase <A NAME="tex2html321"
  HREF="http://ruby-doc.org/core-2.0.0/Object.html"><TT>Object</TT></A><#5101#><#5101#>.
El problema es que muchísimas clases redefinen <tex2html_verb_mark>468<tex2html_verb_mark> y <tex2html_verb_mark>469<tex2html_verb_mark> y, por tanto,
nuestra definición se perdería.

<P>
En vez de eso podemos hacerlo al revés: ver a los nombres de los métodos como colecciones
y a los objetos como índices. No queda tan natural, pero tiene la ventaja de que la clase 
<A NAME="tex2html322"
  HREF="http://ruby-doc.org/core-2.0.0/Symbol.html"><TT>Symbol</TT></A><#5102#><#5102#> no es tan heredada como la clase <A NAME="tex2html323"
  HREF="http://ruby-doc.org/core-2.0.0/Object.html"><TT>Object</TT></A><#5103#><#5103#>.

<P>
Para hacerlo abrimos la clase <A NAME="tex2html324"
  HREF="http://ruby-doc.org/core-2.0.0/Symbol.html"><TT>Symbol</TT></A><#5104#><#5104#> y definimos ahí los operadores:
<PRE><tex2html_verbatim_mark>verbatim617#</PRE>
Repase la sección
<A HREF=<tex2html_cr_mark>#section:singleton_y_eigenclass#5107><tex2html_cr_mark></A>
para recordar que para abrir la <A NAME="5737"><tex2html_anchor_invisible_mark></A><SPAN  CLASS="textit">eigenclass</SPAN> 
del objeto <tex2html_verb_mark>470<tex2html_verb_mark> usamos la sintáxis <tex2html_verb_mark>471<tex2html_verb_mark>. 
Así, una forma de obtener la <A NAME="5739"><tex2html_anchor_invisible_mark></A><SPAN  CLASS="textit">eigenclass</SPAN> es:
<PRE><tex2html_verbatim_mark>verbatim618#</PRE>

<P>
