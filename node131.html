
<H2><A NAME="SECTION02646000000000000000"><tex2html_anchor_invisible_mark></A>
<A NAME="subsection:argumentosdebloque"><tex2html_anchor_mark></A><BR>
Argumentos Bloque
</H2>

<P>

<UL>
<LI>Un <A NAME="5270"><tex2html_anchor_invisible_mark></A><SPAN  CLASS="textit">bloque</SPAN> es un trozo de código Ruby asociado con la invocación de un método.
</LI>
<LI>Los bloques, a diferencia de los métodos, son anónimos
</LI>
<LI>Un <A NAME="5272"><tex2html_anchor_invisible_mark></A><SPAN  CLASS="textit">iterador</SPAN> es un método que espera un bloque
</LI>
<LI>En Ruby, cualquier invocación de un método 
puede ir seguida de un bloque y 
</LI>
<LI>Cualquier método 
puede invocar el código en el bloque asociado que le sigue
mediante la sentencia <tex2html_verb_mark>310<tex2html_verb_mark>.
</LI>
</UL>

<P>
Una de las características de los bloques es su carácter anónimo.
Tampoco son pasados al método en la forma tradicional: <SPAN  CLASS="textit">no figuran en la lista de argumentos</SPAN>.
En vez de eso, son invocados  por medio de <tex2html_verb_mark>311<tex2html_verb_mark>.
Por ejemplo:

<P>
<PRE><tex2html_verbatim_mark>verbatim486#</PRE>
Que usamos así:
<PRE><tex2html_verbatim_mark>verbatim487#</PRE>

<P>
Si se prefiere tener un mayor control sobre el bloque (por ejemplo, se desea pasar el bloque
como argumento a otro método)
lo añadiremos como argumento final a nuestro método, prefijado por un ampersand <tex2html_verb_mark>312<tex2html_verb_mark>.
Dentro del método, El argumento asociado con el bloque pertenecerá a la clase <A NAME="5274"><tex2html_anchor_invisible_mark></A><A NAME="tex2html207"
  HREF="http://ruby-doc.org/core-2.0.0/Proc.html"><TT>Proc</TT></A>
y se deberá invocar usando el método <tex2html_verb_mark>313<tex2html_verb_mark> del objeto <tex2html_verb_mark>314<tex2html_verb_mark> en vez de <tex2html_verb_mark>315<tex2html_verb_mark>:

<P>
<PRE><tex2html_verbatim_mark>verbatim488#</PRE>
Nótese que el asunto afecta a la definición del método pero que la forma
de la llamada (línea 9) no cambia.

<P>
Ejecución:
<PRE><tex2html_verbatim_mark>verbatim489#</PRE>

<P>

<H3><A NAME="SECTION02646100000000000000"><tex2html_anchor_invisible_mark></A>
<A NAME="subsubsection:llamadaconpasodeobjetos"><tex2html_anchor_mark></A><BR>
LLamada con Paso de Objetos <TT>Proc</TT> de Forma Explícita
</H3>

<P>
También podemos contruir un objeto <A NAME="tex2html208"
  HREF="http://ruby-doc.org/core-2.0.0/Proc.html"><TT>Proc</TT></A><#4566#><#4566#> y pasarlo explícitamente 
al método. En este caso se trata de un objeto <SPAN  CLASS="textit">ordinario</SPAN> y ni usamos el <tex2html_verb_mark>316<tex2html_verb_mark>
ni la llamada tiene la sintáxis <SPAN  CLASS="textit">con bloque</SPAN>: 
<PRE><tex2html_verbatim_mark>verbatim490#</PRE>

<P>

<H3><A NAME="SECTION02646200000000000000"><tex2html_anchor_invisible_mark></A>
<A NAME="bloqueslosultimos"><tex2html_anchor_mark></A><BR>
Los Argumentos Bloque Prefijados con <tex2html_ampersand_mark> Deben Ser los Últimos
</H3>

<P>
Los siguientes dos métodos son legales:

<P>
<PRE><tex2html_verbatim_mark>verbatim491#</PRE>

<P>
<PRE><tex2html_verbatim_mark>verbatim492#</PRE>

<P>

<OL>
<LI>Vale la pena resaltar que la sentencia <tex2html_verb_mark>317<tex2html_verb_mark> también funciona sobre un parámetro 
definido con <tex2html_verb_mark>318<tex2html_verb_mark>. 

<P>
</LI>
<LI>Podemos invocarlo como un bloque anónimo incluso si el parámetro ha sido convertido a un objeto <A NAME="tex2html209"
  HREF="http://ruby-doc.org/core-2.0.0/Proc.html"><TT>Proc</TT></A><#4578#><#4578#> 
y pasado como un argumento.
</LI>
</OL>

<P>

<H3><A NAME="SECTION02646300000000000000"><tex2html_anchor_invisible_mark></A>
<A NAME="susubsection:utilizandoampersand"><tex2html_anchor_mark></A><BR>
Utilizando <tex2html_ampersand_mark> en la Invocación de Métodos
</H3>

<P>

<H4><A NAME="SECTION02646310000000000000">
<tex2html_ampersand_mark> como Operador que convierte un Proc en un Bloque</A>
</H4>
  <TABLE CELLPADDING=3>
</TABLE>


<UL>
<LI><tex2html_verb_mark>319<tex2html_verb_mark> can be used in both method definitions and method invocations. 
</LI>
<LI><tex2html_verb_mark>320<tex2html_verb_mark> prefijando un parámetro en una definición de método nos permite  explicitar el bloque 
asociado con la invocación y usarlo como un objeto de la clase <A NAME="tex2html210"
  HREF="http://ruby-doc.org/core-2.0.0/Proc.html"><TT>Proc</TT></A><#4584#><#4584#>
dentro del cuerpo del método
</LI>
<LI>Cuando se usa <tex2html_verb_mark>321<tex2html_verb_mark> en una invocación/llamada prefijando un
objeto <A NAME="tex2html211"
  HREF="http://ruby-doc.org/core-2.0.0/Proc.html"><TT>Proc</TT></A><#4585#><#4585#> trata al <A NAME="tex2html212"
  HREF="http://ruby-doc.org/core-2.0.0/Proc.html"><TT>Proc</TT></A><#4586#><#4586#> como si fuera
un bloque que sigue  la invocación
</LI>
</UL>

<P>
<PRE><tex2html_verbatim_mark>verbatim493#</PRE>

<P>
Al reescribirlo como sigue evitamos que el intérprete Ruby parsee dos veces el mismo código:
<PRE><tex2html_verbatim_mark>verbatim494#</PRE>

<P>

<H4><A NAME="SECTION02646320000000000000">
Sintáxis de la llamada</A>
</H4>
  <TABLE CELLPADDING=3>
</TABLE>

El <A NAME="tex2html213"
  HREF="http://ruby-doc.org/core-2.0.0/Proc.html"><TT>Proc</TT></A><#4593#><#4593#> construido a partir del bloque se pasa como el 
último argumento en la llamada al método separándolo por comas del resto de los argumentos:
<PRE><tex2html_verbatim_mark>verbatim495#</PRE>
No podemos llamarlo como si fuera el bloque que sigue:
<PRE><tex2html_verbatim_mark>verbatim496#</PRE>
Así tampoco:
<PRE><tex2html_verbatim_mark>verbatim497#</PRE>
Es necesario hacer la conversión con <tex2html_verb_mark>322<tex2html_verb_mark> y pasarlo como último argumento:
<PRE><tex2html_verbatim_mark>verbatim498#</PRE>

<P>

<H4><A NAME="SECTION02646330000000000000">
Usando <tex2html_ampersand_mark> sobre el Nombre de un Método</A>
</H4>
  <TABLE CELLPADDING=3>
</TABLE>


<P>
Realmente, la invocación con <tex2html_verb_mark>323<tex2html_verb_mark> puede usarse con cualquier objeto que disponga de un método <tex2html_verb_mark>324<tex2html_verb_mark>.

<P>
En Ruby 1.9 la clase <A NAME="tex2html214"
  HREF="http://ruby-doc.org/core-2.0.0/Symbol.html"><TT>Symbol</TT></A><#4603#><#4603#> dispone de un método <tex2html_verb_mark>325<tex2html_verb_mark>, lo que permite a los símbolos ser prefijados 
con <tex2html_verb_mark>326<tex2html_verb_mark> y ser pasados a los iteradores:

<P>
<PRE><tex2html_verbatim_mark>verbatim499#</PRE>
Este código es equivalente a:
<PRE><tex2html_verbatim_mark>verbatim500#</PRE>

<P>
